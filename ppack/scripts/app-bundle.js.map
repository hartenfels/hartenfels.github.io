{"version":3,"sources":["app.js","environment.js","main.js","modal3d.js","resources/index.js"],"names":["App","pal","length","width","height","top","box","items","data3d","calculate","update","timeout","timer","window","clearTimeout","setTimeout","fixUpInputs","fix","match","exec","input","value","parseFloat","test","data","error","e","l","w","h","options","check","max","reduce","o","Math","totalBoxes","results","filter","bl","floor","bw","bh","al","aw","ah","totalItems","boxesLength","boxesWidth","boxesPerLayer","numberOfLayers","actualLength","actualWidth","actualHeight","usage","calculateUsage","volume","round","toFixed","show3d","modal","debug","testing","configure","Promise","config","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","THREE","Modal3d","bindingEngine","boxes","observer","propertyObserver","subscription","subscribe","newval","oldval","buildPallette","setUp","scene","Scene","renderer","WebGLRenderer","camera","PerspectiveCamera","setClearColor","onResize","add","AmbientLight","light","DirectionalLight","wrapper","document","getElementById","appendChild","domElement","orbit","offsetWidth","render","requestAnimationFrame","style","cpos","position","set","x","y","z","setSize","mkColor","random","mkBox","geometry","BoxGeometry","material","MeshLambertMaterial","color","Mesh","push","mkLayer","i","j","remove","splice","reset","lookAt","Vector3"],"mappings":";;;;;;;;;;;;;;;;;;;;;;MAEaA,cAAAA;AACX,mBAAc;AAAA;;AACZ,WAAKC,GAAL,GAAW;AACTC,gBAAS,GADA;AAETC,eAAS,EAFA;AAGTC,gBAAS,EAHA;AAITC,aAAS;AAJA,OAAX;;AAOA,WAAKC,GAAL,GAAW;AACTJ,gBAAS,EADA;AAETC,eAAS,EAFA;AAGTC,gBAAS,EAHA;AAITG,eAAS;AAJA,OAAX;;AAOA,WAAKC,MAAL,GAAc,EAAd;;AAEA,WAAKC,SAAL;AACD;;kBAGDC,yBAAOC,SAAS;AAAA;;AACd,UAAI,KAAKC,KAAT,EAAgB;AACdC,eAAOC,YAAP,CAAoB,KAAKF,KAAzB;AACD;;AAED,WAAKA,KAAL,GAAaC,OAAOE,UAAP,CAAkB,YAAM;AACnC,cAAKH,KAAL,GAAa,IAAb;AACA,cAAKH,SAAL;AACD,OAHY,EAGVE,OAHU,CAAb;;AAKA,aAAO,IAAP;AACD;;kBAGDK,qCAAc;AACZ,UAAIC,MAAM,SAANA,GAAM,QAAS;AACjB,YAAIC,QAAQ,kCAAkCC,IAAlC,CAAuCC,KAAvC,CAAZ;;AAEA,YAAIF,KAAJ,EAAW;AACT,cAAIG,QAAQC,WAAcJ,MAAM,CAAN,CAAd,UAA0BA,MAAM,CAAN,KAAY,CAAtC,EAAZ;;AAEA,cAAIG,SAAS,CAAb,EAAgB;AACd,kBAAM,oCAAN;AACD;;AAED,iBAAOA,KAAP;AACD,SARD,MASK,IAAI,QAAQE,IAAR,CAAaH,KAAb,CAAJ,EAAyB;AAC5B,gBAAM,kCAAN;AACD;;AAED,0CAA6BA,KAA7B;AACD,OAjBD;;AAmBA,aAAO;AACLnB,aAAM;AACJC,kBAASe,IAAI,KAAKhB,GAAL,CAASC,MAAb,CADL;AAEJC,iBAASc,IAAI,KAAKhB,GAAL,CAASE,KAAb,CAFL;AAGJC,kBAASa,IAAI,KAAKhB,GAAL,CAASG,MAAb,CAHL;AAIJC,eAASY,IAAI,KAAKhB,GAAL,CAASI,GAAb;AAJL,SADD;AAOLC,aAAM;AACJJ,kBAASe,IAAI,KAAKX,GAAL,CAASJ,MAAb,CADL;AAEJC,iBAASc,IAAI,KAAKX,GAAL,CAASH,KAAb,CAFL;AAGJC,kBAASa,IAAI,KAAKX,GAAL,CAASF,MAAb,CAHL;AAIJG,iBAASU,IAAI,KAAKX,GAAL,CAASC,KAAb;AAJL;AAPD,OAAP;AAcD;;kBAGDE,iCAAY;AACV,UAAIe,aAAJ;;AAEA,UAAI;AACF,aAAKC,KAAL,GAAa,IAAb;AACAD,eAAa,KAAKR,WAAL,EAAb;AACD,OAHD,CAIA,OAAOU,CAAP,EAAU;AACR,aAAKD,KAAL,GAAaC,CAAb;AACA;AACD;;AAED,UAAIC,IAAIH,KAAKlB,GAAL,CAASJ,MAAjB;AACA,UAAI0B,IAAIJ,KAAKlB,GAAL,CAASH,KAAjB;AACA,UAAI0B,IAAIL,KAAKlB,GAAL,CAASF,MAAjB;;AAEA,UAAI0B,UAAU,CACZ,KAAKC,KAAL,CAAWP,IAAX,EAAiBG,CAAjB,EAAoBC,CAApB,EAAuBC,CAAvB,CADY,EAEZ,KAAKE,KAAL,CAAWP,IAAX,EAAiBG,CAAjB,EAAoBE,CAApB,EAAuBD,CAAvB,CAFY,EAGZ,KAAKG,KAAL,CAAWP,IAAX,EAAiBI,CAAjB,EAAoBD,CAApB,EAAuBE,CAAvB,CAHY,EAIZ,KAAKE,KAAL,CAAWP,IAAX,EAAiBI,CAAjB,EAAoBC,CAApB,EAAuBF,CAAvB,CAJY,EAKZ,KAAKI,KAAL,CAAWP,IAAX,EAAiBK,CAAjB,EAAoBF,CAApB,EAAuBC,CAAvB,CALY,EAMZ,KAAKG,KAAL,CAAWP,IAAX,EAAiBK,CAAjB,EAAoBD,CAApB,EAAuBD,CAAvB,CANY,CAAd;;AASA,UAAIK,MAAWF,QAAQG,MAAR,CAAe,UAACD,GAAD,EAAME,CAAN;AAAA,eAAYC,KAAKH,GAAL,CAASA,GAAT,EAAcE,EAAEE,UAAhB,CAAZ;AAAA,OAAf,EAAwD,CAAxD,CAAf;AACA,WAAKC,OAAL,GAAeP,QAAQQ,MAAR,CAAe;AAAA,eAAKJ,EAAEE,UAAF,GAAe,CAAf,IAAoBF,EAAEE,UAAF,IAAgBJ,GAAzC;AAAA,OAAf,CAAf;AACD;;kBAGDD,uBAAMP,MAAMG,GAAGC,GAAGC,GAAG;AACnB,UAAIU,KAAKJ,KAAKK,KAAL,CAAWhB,KAAKvB,GAAL,CAASC,MAAT,GAAkByB,CAA7B,CAAT;AACA,UAAIc,KAAKN,KAAKK,KAAL,CAAWhB,KAAKvB,GAAL,CAASE,KAAT,GAAkByB,CAA7B,CAAT;AACA,UAAIc,KAAKP,KAAKK,KAAL,CAAW,CAAChB,KAAKvB,GAAL,CAASI,GAAT,GAAemB,KAAKvB,GAAL,CAASG,MAAzB,IAAmCyB,CAA9C,CAAT;;AAEA,UAAIc,KAAKJ,KAAKZ,CAAd;AACA,UAAIiB,KAAKH,KAAKb,CAAd;AACA,UAAIiB,KAAKH,KAAKb,CAAd;;AAEA,aAAO;AACL3B,gBAAiByB,CADZ;AAELxB,eAAiByB,CAFZ;AAGLxB,gBAAiByB,CAHZ;AAILO,oBAAiBG,KAAKE,EAAL,GAAUC,EAJtB;AAKLI,oBAAiBP,KAAKE,EAAL,GAAUC,EAAV,GAAelB,KAAKlB,GAAL,CAASC,KALpC;AAMLwC,qBAAiBR,EANZ;AAOLS,oBAAiBP,EAPZ;AAQLQ,uBAAiBV,KAAKE,EARjB;AASLS,wBAAiBR,EATZ;AAULS,sBAAiBR,EAVZ;AAWLS,qBAAiBR,EAXZ;AAYLS,sBAAiBR,EAZZ;AAaLS,eAAiB,KAAKC,cAAL,CAAoB/B,IAApB,EAA0BmB,KAAKC,EAAL,GAAUC,EAApC,CAbZ;AAcL5C,aAAiBuB,KAAKvB;AAdjB,OAAP;AAgBD;;kBAGDsD,yCAAe/B,MAAMgC,QAAQ;AAC3B,UAAIxB,MAAMR,KAAKvB,GAAL,CAASC,MAAT,GAAkBsB,KAAKvB,GAAL,CAASE,KAA3B,IAAoCqB,KAAKvB,GAAL,CAASI,GAAT,GAAemB,KAAKvB,GAAL,CAASG,MAA5D,CAAV;AACA,aAAO,CAAC+B,KAAKsB,KAAL,CAAWD,SAASxB,GAAT,GAAe,KAA1B,IAAmC,GAApC,EAAyC0B,OAAzC,CAAiD,CAAjD,CAAP;AACD;;kBAGDC,yBAAOnC,MAAM;AACX,WAAKhB,MAAL,GAAcgB,IAAd;AACA,4BAAE,UAAF,EAAcoC,KAAd,CAAoB,MAApB;AACA,aAAO,KAAP;AACD;;;;;;;;;;;oBC/IY;AACbC,WAAO,IADM;AAEbC,aAAS;AAFI;;;;;;;;UCSCC,YAAAA;;;;;;;;;;AANhBC,UAAQC,MAAR,CAAe;AACbC,cAAU;AACRC,wBAAkB;AADV;AADG,GAAf;;AAMO,WAASJ,SAAT,CAAmBK,OAAnB,EAA4B;AACjCA,YAAQC,GAAR,CACGC,qBADH,GAEGC,OAFH,CAEW,WAFX;;AAIA,QAAI,sBAAYV,KAAhB,EAAuB;AACrBO,cAAQC,GAAR,CAAYG,kBAAZ;AACD;;AAED,QAAI,sBAAYV,OAAhB,EAAyB;AACvBM,cAAQC,GAAR,CAAYI,MAAZ,CAAmB,iBAAnB;AACD;;AAEDL,YAAQM,KAAR,GAAgBC,IAAhB,CAAqB;AAAA,aAAMP,QAAQQ,OAAR,EAAN;AAAA,KAArB;AACD;;;;;;;;;;MCtBWC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAICC,kBAAAA,kBADZ;AAIC,qBAAYC,aAAZ,EAA2B;AAAA;;AAAA;;AAAA;;AACzB,WAAKC,KAAL,GAAa,EAAb;;AAEA,UAAIC,WAAgBF,cAAcG,gBAAd,CAA+B,IAA/B,EAAqC,MAArC,CAApB;AACA,WAAKC,YAAL,GAAoBF,SAASG,SAAT,CAAmB,UAACC,MAAD,EAASC,MAAT,EAAoB;AACzD,YAAID,UAAUA,OAAOpF,GAArB,EAA0B;AACxB,gBAAKsF,aAAL,CAAmBF,MAAnB;AACD;AACF,OAJmB,CAApB;AAKD;;sBAGDG,yBAAQ;AAAA;;AACN,WAAKC,KAAL,GAAgB,IAAIZ,MAAMa,KAAV,EAAhB;AACA,WAAKC,QAAL,GAAgB,IAAId,MAAMe,aAAV,EAAhB;AACA,WAAKC,MAAL,GAAgB,IAAIhB,MAAMiB,iBAAV,CAA4B,EAA5B,EAAgC,KAAK,CAArC,EAAwC,GAAxC,EAA6C,IAA7C,CAAhB;;AAEA,WAAKH,QAAL,CAAcI,aAAd,CAA4B,QAA5B,EAAsC,GAAtC;AACA,WAAKC,QAAL,CAAc,GAAd,EAAmB,GAAnB;;AAEA,WAAKP,KAAL,CAAWQ,GAAX,CAAe,IAAIpB,MAAMqB,YAAV,CAAuB,QAAvB,CAAf;;AAEA,WAAKC,KAAL,GAAa,IAAItB,MAAMuB,gBAAV,CAA2B,QAA3B,EAAqC,GAArC,CAAb;AACA,WAAKX,KAAL,CAAWQ,GAAX,CAAe,KAAKE,KAApB;;AAEA,UAAIE,UAAUC,SAASC,cAAT,CAAwB,WAAxB,CAAd;AACAF,cAAQG,WAAR,CAAoB,KAAKb,QAAL,CAAcc,UAAlC;;AAEA,WAAKC,KAAL,GAAa,KAAK,kCAAc7B,KAAd,CAAL,EAA2B,KAAKgB,MAAhC,EAAwC,KAAKF,QAAL,CAAcc,UAAtD,CAAb;;AAEA,UAAI7E,IAASyE,QAAQM,WAArB;AACA,UAAIC,SAAS,SAATA,MAAS,GAAM;AACjBC,8BAAsBD,MAAtB;;AAEA,YAAIP,QAAQM,WAAR,KAAwB/E,CAA5B,EAA+B;AAC7BA,cAAIyE,QAAQM,WAAZ;AACA,cAAI9E,IAAID,IAAI,EAAJ,GAAS,CAAjB;AACAyE,kBAAQS,KAAR,CAAc1G,MAAd,GAA0ByB,CAA1B;AACA,iBAAKmE,QAAL,CAAcpE,CAAd,EAAiBC,CAAjB;AACD;;AAED,YAAIkF,OAAO,OAAKlB,MAAL,CAAYmB,QAAvB;AACA,eAAKb,KAAL,CAAWa,QAAX,CAAoBC,GAApB,CAAwBF,KAAKG,CAA7B,EAAgCH,KAAKI,CAArC,EAAwCJ,KAAKK,CAA7C;;AAEA,eAAKzB,QAAL,CAAciB,MAAd,CAAqB,OAAKnB,KAA1B,EAAiC,OAAKI,MAAtC;AACD,OAdD;;AAgBAe;AACD;;sBAGDZ,6BAASpE,GAAGC,GAAG;AACb,WAAK8D,QAAL,CAAc0B,OAAd,CAAsBzF,CAAtB,EAAyBC,CAAzB;AACD;;sBAGDyF,6BAAU;AACR,aAAOnF,KAAKsB,KAAL,CAAWtB,KAAKoF,MAAL,KAAgB,QAA3B,CAAP;AACD;;sBAEDC,uBAAMN,GAAGC,GAAGC,GAAGjH,OAAOC,QAAQF,QAAQ;AACpC,UAAIuH,WAAW,IAAI5C,MAAM6C,WAAV,CAAsBvH,KAAtB,EAA6BC,MAA7B,EAAqCF,MAArC,CAAf;AACA,UAAIyH,WAAW,IAAI9C,MAAM+C,mBAAV,CAA8B,EAACC,OAAQ,KAAKP,OAAL,EAAT,EAA9B,CAAf;AACA,UAAIhH,MAAW,IAAIuE,MAAMiD,IAAV,CAAeL,QAAf,EAAyBE,QAAzB,CAAf;AACArH,UAAI0G,QAAJ,CAAaC,GAAb,CAAiBC,CAAjB,EAAoBC,CAApB,EAAuBC,CAAvB;AACA,WAAKpC,KAAL,CAAW+C,IAAX,CAAgBzH,GAAhB;AACA,aAAOA,GAAP;AACD;;sBAED0H,2BAAQxG,MAAMK,GAAG;AACf,WAAK,IAAIoG,IAAI,CAAb,EAAgBA,IAAIzG,KAAKwB,UAAzB,EAAqC,EAAEiF,CAAvC,EAA0C;AACxC,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI1G,KAAKuB,WAAzB,EAAsC,EAAEmF,CAAxC,EAA2C;AACzC,cAAIhB,IAAIe,IAAIzG,KAAKrB,KAAT,GAAkB,CAACqB,KAAKvB,GAAL,CAASE,KAAT,GAAkBqB,KAAKrB,KAAxB,IAAkC,CAA5D;AACA,cAAIiH,IAAIc,IAAI1G,KAAKtB,MAAT,GAAkB,CAACsB,KAAKvB,GAAL,CAASC,MAAT,GAAkBsB,KAAKtB,MAAxB,IAAkC,CAA5D;AACA,cAAIiH,IAAItF,IAAI,CAACL,KAAKpB,MAAL,GAAcoB,KAAKvB,GAAL,CAASG,MAAxB,IAAkC,CAA9C;AACA,eAAKoH,KAAL,CAAWN,CAAX,EAAcC,CAAd,EAAiBC,CAAjB,EAAoB5F,KAAKrB,KAAzB,EAAgCqB,KAAKpB,MAArC,EAA6CoB,KAAKtB,MAAlD;AACD;AACF;AACF;;sBAEDqF,uCAAc/D,MAAM;AAAA;;AAClB,UAAI,CAAC,KAAKiE,KAAV,EAAiB;AACf,aAAKD,KAAL;AACD;;AAED,qBAAKC,KAAL,EAAW0C,MAAX,eAAqB,KAAKnD,KAAL,CAAWoD,MAAX,CAAkB,CAAlB,EAAqB,KAAKpD,KAAL,CAAW9E,MAAhC,CAArB;;AAEA,UAAI2B,IAAI,CAACL,KAAK6B,YAAL,GAAoB7B,KAAKvB,GAAL,CAASG,MAA9B,IAAwC,CAAC,GAAjD;;AAEA,WAAKoH,KAAL,CAAW,CAAX,EAAc3F,CAAd,EAAiB,CAAjB,EAAoBL,KAAKvB,GAAL,CAASE,KAA7B,EAAoCqB,KAAKvB,GAAL,CAASG,MAA7C,EAAqDoB,KAAKvB,GAAL,CAASC,MAA9D;AACA2B,WAAKL,KAAKvB,GAAL,CAASG,MAAd;;AAEA,WAAK,IAAI6H,IAAI,CAAb,EAAgBA,IAAIzG,KAAK0B,cAAzB,EAAyC,EAAE+E,CAA3C,EAA8C;AAC5C,aAAKD,OAAL,CAAaxG,IAAb,EAAmBK,CAAnB;AACAA,aAAKL,KAAKpB,MAAV;AACD;;AAED,sBAAKqF,KAAL,EAAWQ,GAAX,gBAAkB,KAAKjB,KAAvB;;AAEA,WAAK0B,KAAL,CAAW2B,KAAX;AACA,WAAKxC,MAAL,CAAYmB,QAAZ,CAAqBC,GAArB,CAAyBzF,KAAKvB,GAAL,CAASE,KAAT,GAAiB,CAA1C,EAA6C0B,IAAI,CAAjD,EAAoDL,KAAKvB,GAAL,CAASC,MAAT,GAAkB,CAAtE;AACA,WAAK2F,MAAL,CAAYyC,MAAZ,CAAmB,IAAIzD,MAAM0D,OAAV,EAAnB;AACD;;;;;;;;;;;;;;UC9GaxE,YAAAA;AAAT,WAASA,SAAT,CAAmBE,MAAnB,EAA2B,CAEjC","file":"app-bundle.js","sourcesContent":["import $ from 'jquery';\n\nexport class App {\n  constructor() {\n    this.pal = {\n      length : 120,\n      width  : 80,\n      height : 15,\n      top    : 195,\n    };\n\n    this.box = {\n      length : 30,\n      width  : 40,\n      height : 20,\n      items  : 1,\n    };\n\n    this.data3d = {};\n\n    this.calculate();\n  }\n\n\n  update(timeout) {\n    if (this.timer) {\n      window.clearTimeout(this.timer);\n    }\n\n    this.timer = window.setTimeout(() => {\n      this.timer = null;\n      this.calculate();\n    }, timeout);\n\n    return true;\n  }\n\n\n  fixUpInputs() {\n    let fix = input => {\n      let match = /^\\s*([0-9]+)([,.]([0-9]+))?\\s*$/.exec(input);\n\n      if (match) {\n        let value = parseFloat(`${match[1]}.${match[3] || 0}`);\n\n        if (value <= 0) {\n          throw 'Eingaben müssen größer als 0 sein.';\n        }\n\n        return value;\n      }\n      else if (/^\\s*$/.test(input)) {\n        throw 'Eingaben dürfen nicht leer sein.';\n      }\n\n      throw `Ungültige Eingabe: \"${input}\"`;\n    };\n\n    return {\n      pal : {\n        length : fix(this.pal.length),\n        width  : fix(this.pal.width ),\n        height : fix(this.pal.height),\n        top    : fix(this.pal.top   ),\n      },\n      box : {\n        length : fix(this.box.length),\n        width  : fix(this.box.width ),\n        height : fix(this.box.height),\n        items  : fix(this.box.items ),\n      }\n    };\n  }\n\n\n  calculate() {\n    let data;\n\n    try {\n      this.error = null;\n      data       = this.fixUpInputs();\n    }\n    catch (e) {\n      this.error = e;\n      return;\n    }\n\n    let l = data.box.length;\n    let w = data.box.width;\n    let h = data.box.height;\n\n    let options = [\n      this.check(data, l, w, h),\n      this.check(data, l, h, w),\n      this.check(data, w, l, h),\n      this.check(data, w, h, l),\n      this.check(data, h, l, w),\n      this.check(data, h, w, l),\n    ];\n\n    let max      = options.reduce((max, o) => Math.max(max, o.totalBoxes), 0);\n    this.results = options.filter(o => o.totalBoxes > 0 && o.totalBoxes >= max);\n  }\n\n\n  check(data, l, w, h) {\n    let bl = Math.floor(data.pal.length / l);\n    let bw = Math.floor(data.pal.width  / w);\n    let bh = Math.floor((data.pal.top - data.pal.height) / h);\n\n    let al = bl * l;\n    let aw = bw * w;\n    let ah = bh * h;\n\n    return {\n      length         : l,\n      width          : w,\n      height         : h,\n      totalBoxes     : bl * bw * bh,\n      totalItems     : bl * bw * bh * data.box.items,\n      boxesLength    : bl,\n      boxesWidth     : bw,\n      boxesPerLayer  : bl * bw,\n      numberOfLayers : bh,\n      actualLength   : al,\n      actualWidth    : aw,\n      actualHeight   : ah,\n      usage          : this.calculateUsage(data, al * aw * ah),\n      pal            : data.pal,\n    };\n  }\n\n\n  calculateUsage(data, volume) {\n    let max = data.pal.length * data.pal.width * (data.pal.top - data.pal.height);\n    return (Math.round(volume / max * 10000) / 100).toFixed(2);\n  }\n\n\n  show3d(data) {\n    this.data3d = data;\n    $('#modal3d').modal('show');\n    return false;\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {bindable, inject, BindingEngine} from 'aurelia-framework';\nimport * as THREE from 'three';\nimport OrbitControls from 'three-orbit-controls';\n\n@inject(BindingEngine)\nexport class Modal3d {\n  @bindable data;\n\n  constructor(bindingEngine) {\n    this.boxes = [];\n\n    let observer      = bindingEngine.propertyObserver(this, 'data');\n    this.subscription = observer.subscribe((newval, oldval) => {\n      if (newval && newval.pal) {\n        this.buildPallette(newval);\n      }\n    });\n  }\n\n\n  setUp() {\n    this.scene    = new THREE.Scene();\n    this.renderer = new THREE.WebGLRenderer();\n    this.camera   = new THREE.PerspectiveCamera(45, 16 / 9, 0.1, 1000);\n\n    this.renderer.setClearColor(0xffffff, 1.0);\n    this.onResize(848, 505);\n\n    this.scene.add(new THREE.AmbientLight(0x555555));\n\n    this.light = new THREE.DirectionalLight(0xffffff, 1.0);\n    this.scene.add(this.light);\n\n    let wrapper = document.getElementById('wrapper3d');\n    wrapper.appendChild(this.renderer.domElement);\n\n    this.orbit = new (OrbitControls(THREE))(this.camera, this.renderer.domElement);\n\n    let w      = wrapper.offsetWidth;\n    let render = () => {\n      requestAnimationFrame(render);\n\n      if (wrapper.offsetWidth !== w) {\n        w = wrapper.offsetWidth;\n        let h = w / 16 * 9;\n        wrapper.style.height = `${h}px`;\n        this.onResize(w, h);\n      }\n\n      let cpos = this.camera.position;\n      this.light.position.set(cpos.x, cpos.y, cpos.z);\n\n      this.renderer.render(this.scene, this.camera);\n    };\n\n    render();\n  }\n\n\n  onResize(w, h) {\n    this.renderer.setSize(w, h);\n  }\n\n\n  mkColor() {\n    return Math.round(Math.random() * 0xffffff);\n  }\n\n  mkBox(x, y, z, width, height, length) {\n    let geometry = new THREE.BoxGeometry(width, height, length);\n    let material = new THREE.MeshLambertMaterial({color : this.mkColor()});\n    let box      = new THREE.Mesh(geometry, material);\n    box.position.set(x, y, z);\n    this.boxes.push(box);\n    return box;\n  }\n\n  mkLayer(data, h) {\n    for (let i = 0; i < data.boxesWidth; ++i) {\n      for (let j = 0; j < data.boxesLength; ++j) {\n        let x = i * data.width  - (data.pal.width  - data.width ) / 2;\n        let z = j * data.length - (data.pal.length - data.length) / 2;\n        let y = h + (data.height - data.pal.height) / 2;\n        this.mkBox(x, y, z, data.width, data.height, data.length);\n      }\n    }\n  }\n\n  buildPallette(data) {\n    if (!this.scene) {\n      this.setUp();\n    }\n\n    this.scene.remove(...this.boxes.splice(0, this.boxes.length));\n\n    let h = (data.actualHeight + data.pal.height) * -0.5;\n\n    this.mkBox(0, h, 0, data.pal.width, data.pal.height, data.pal.length);\n    h += data.pal.height;\n\n    for (let i = 0; i < data.numberOfLayers; ++i) {\n      this.mkLayer(data, h);\n      h += data.height;\n    }\n\n    this.scene.add(...this.boxes);\n\n    this.orbit.reset();\n    this.camera.position.set(data.pal.width * 3, h * 2, data.pal.length * 3);\n    this.camera.lookAt(new THREE.Vector3());\n  }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n"],"sourceRoot":".."}