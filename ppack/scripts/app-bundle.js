define("app",["exports","jquery"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(t);e.App=function(){function e(){n(this,e),this.pal={length:120,width:80,height:15,top:195},this.box={length:30,width:40,height:20,items:1},this.data3d={},this.calculate()}return e.prototype.update=function(e){var t=this;return this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(function(){t.timer=null,t.calculate()},e),!0},e.prototype.fixUpInputs=function(){var e=function(e){var t=/^\s*([0-9]+)([,.]([0-9]+))?\s*$/.exec(e);if(t){var n=parseFloat(t[1]+"."+(t[3]||0));if(n<=0)throw"Eingaben müssen größer als 0 sein.";return n}if(/^\s*$/.test(e))throw"Eingaben dürfen nicht leer sein.";throw'Ungültige Eingabe: "'+e+'"'};return{pal:{length:e(this.pal.length),width:e(this.pal.width),height:e(this.pal.height),top:e(this.pal.top)},box:{length:e(this.box.length),width:e(this.box.width),height:e(this.box.height),items:e(this.box.items)}}},e.prototype.calculate=function(){var e=void 0;try{this.error=null,e=this.fixUpInputs()}catch(e){return void(this.error=e)}var t=e.box.length,n=e.box.width,a=e.box.height,i=[this.check(e,t,n,a),this.check(e,t,a,n),this.check(e,n,t,a),this.check(e,n,a,t),this.check(e,a,t,n),this.check(e,a,n,t)],l=i.reduce(function(e,t){return Math.max(e,t.totalBoxes)},0);this.results=i.filter(function(e){return e.totalBoxes>0&&e.totalBoxes>=l})},e.prototype.check=function(e,t,n,a){var i=Math.floor(e.pal.length/t),l=Math.floor(e.pal.width/n),s=Math.floor((e.pal.top-e.pal.height)/a),r=i*t,o=l*n,d=s*a;return{length:t,width:n,height:a,totalBoxes:i*l*s,totalItems:i*l*s*e.box.items,boxesLength:i,boxesWidth:l,boxesPerLayer:i*l,numberOfLayers:s,actualLength:r,actualWidth:o,actualHeight:d,usage:this.calculateUsage(e,r*o*d),pal:e.pal}},e.prototype.calculateUsage=function(e,t){var n=e.pal.length*e.pal.width*(e.pal.top-e.pal.height);return(Math.round(t/n*1e4)/100).toFixed(2)},e.prototype.show3d=function(e){return this.data3d=e,(0,a.default)("#modal3d").modal("show"),!1},e}()}),define("environment",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={debug:!1,testing:!1}}),define("main",["exports","./environment"],function(e,t){"use strict";function n(e){e.use.standardConfiguration().feature("resources"),a.default.debug&&e.use.developmentLogging(),a.default.testing&&e.use.plugin("aurelia-testing"),e.start().then(function(){return e.setRoot()})}Object.defineProperty(e,"__esModule",{value:!0}),e.configure=n;var a=function(e){return e&&e.__esModule?e:{default:e}}(t);Promise.config({warnings:{wForgottenReturn:!1}})}),define("modal3d",["exports","aurelia-framework","three","three-orbit-controls"],function(e,t,n,a){"use strict";function i(e,t,n,a){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(a):void 0})}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Modal3d=void 0;var s,r,o,d,c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n),u=function(e){return e&&e.__esModule?e:{default:e}}(a);e.Modal3d=(s=(0,t.inject)(t.BindingEngine))((o=function(){function e(t){var n=this;l(this,e),i(this,"data",d,this),this.boxes=[];var a=t.propertyObserver(this,"data");this.subscription=a.subscribe(function(e,t){e&&e.pal&&n.buildPallette(e)})}return e.prototype.setUp=function(){var e=this;this.scene=new c.Scene,this.renderer=new c.WebGLRenderer,this.camera=new c.PerspectiveCamera(45,16/9,.1,1e3),this.renderer.setClearColor(16777215,1),this.onResize(848,505),this.scene.add(new c.AmbientLight(5592405)),this.light=new c.DirectionalLight(16777215,1),this.scene.add(this.light);var t=document.getElementById("wrapper3d");t.appendChild(this.renderer.domElement),this.orbit=new((0,u.default)(c))(this.camera,this.renderer.domElement);var n=t.offsetWidth;!function a(){if(requestAnimationFrame(a),t.offsetWidth!==n){n=t.offsetWidth;var i=n/16*9;t.style.height=i+"px",e.onResize(n,i)}var l=e.camera.position;e.light.position.set(l.x,l.y,l.z),e.renderer.render(e.scene,e.camera)}()},e.prototype.onResize=function(e,t){this.renderer.setSize(e,t)},e.prototype.mkColor=function(){return Math.round(16777215*Math.random())},e.prototype.mkBox=function(e,t,n,a,i,l){var s=new c.BoxGeometry(a,i,l),r=new c.MeshLambertMaterial({color:this.mkColor()}),o=new c.Mesh(s,r);return o.position.set(e,t,n),this.boxes.push(o),o},e.prototype.mkLayer=function(e,t){for(var n=0;n<e.boxesWidth;++n)for(var a=0;a<e.boxesLength;++a){var i=n*e.width-(e.pal.width-e.width)/2,l=a*e.length-(e.pal.length-e.length)/2,s=t+(e.height-e.pal.height)/2;this.mkBox(i,s,l,e.width,e.height,e.length)}},e.prototype.buildPallette=function(e){var t,n;this.scene||this.setUp(),(t=this.scene).remove.apply(t,this.boxes.splice(0,this.boxes.length));var a=-.5*(e.actualHeight+e.pal.height);this.mkBox(0,a,0,e.pal.width,e.pal.height,e.pal.length),a+=e.pal.height;for(var i=0;i<e.numberOfLayers;++i)this.mkLayer(e,a),a+=e.height;(n=this.scene).add.apply(n,this.boxes),this.orbit.reset(),this.camera.position.set(3*e.pal.width,2*a,3*e.pal.length),this.camera.lookAt(new c.Vector3)},e}(),d=function(e,t,n,a,i){var l={};return Object.keys(a).forEach(function(e){l[e]=a[e]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=n.slice().reverse().reduce(function(n,a){return a(e,t,n)||n},l),i&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(i):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(e,t,l),l=null),l}(o.prototype,"data",[t.bindable],{enumerable:!0,initializer:null}),r=o))||r}),define("resources/index",["exports"],function(e){"use strict";function t(e){}Object.defineProperty(e,"__esModule",{value:!0}),e.configure=t}),define("text!app.html",["module"],function(e){e.exports='<template>\n  <require from="./modal3d"></require>\n\n  <form class="container">\n    <h1>Palettenpacker</h1>\n\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h2 class="panel-title">Palette</h2>\n      </div>\n      <div class="panel-body">\n        <div class="row">\n          <div class="col-sm-3">\n            <label>Länge</label>\n            <div class="input-group">\n              <input type="text" class="form-control" value.bind="pal.length"\n                     change.delegate="update(10)" keydown.delegate="update(500)">\n              <span class="input-group-addon">cm</span>\n            </div>\n          </div>\n          <div class="col-sm-3">\n            <label>Breite</label>\n            <div class="input-group">\n              <input type="text" class="form-control" value.bind="pal.width"\n                     change.delegate="update(10)" keydown.delegate="update(500)">\n              <span class="input-group-addon">cm</span>\n            </div>\n          </div>\n          <div class="col-sm-3">\n            <label>Höhe</label>\n            <div class="input-group">\n              <input type="text" class="form-control" value.bind="pal.height"\n                     change.delegate="update(10)" keydown.delegate="update(500)">\n              <span class="input-group-addon">cm</span>\n            </div>\n          </div>\n          <div class="col-sm-3">\n            <label>Maximalhöhe</label>\n            <div class="input-group">\n              <input type="text" class="form-control" value.bind="pal.top"\n                     change.delegate="update(10)" keydown.delegate="update(500)">\n              <span class="input-group-addon">cm</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h2 class="panel-title">Verpackungseinheit (VE)</h2>\n      </div>\n      <div class="panel-body">\n        <div class="row">\n          <div class="col-sm-3">\n            <label>Länge</label>\n            <div class="input-group">\n              <input type="text" class="form-control" value.bind="box.length"\n                     change.delegate="update(10)" keydown.delegate="update(500)">\n              <span class="input-group-addon">cm</span>\n            </div>\n          </div>\n          <div class="col-sm-3">\n            <label>Breite</label>\n            <div class="input-group">\n              <input type="text" class="form-control" value.bind="box.width"\n                     change.delegate="update(10)" keydown.delegate="update(500)">\n              <span class="input-group-addon">cm</span>\n            </div>\n          </div>\n          <div class="col-sm-3">\n            <label>Höhe</label>\n            <div class="input-group">\n              <input type="text" class="form-control" value.bind="box.height"\n                     change.delegate="update(10)" keydown.delegate="update(500)">\n              <span class="input-group-addon">cm</span>\n            </div>\n          </div>\n          <div class="col-sm-3">\n            <label>Inhalt</label>\n            <div class="input-group">\n              <input type="text" class="form-control" value.bind="box.items"\n                     change.delegate="update(10)" keydown.delegate="update(500)">\n              <span class="input-group-addon">Stück</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div if.bind="error" class="alert alert-danger">\n      ${error}\n    </div>\n\n    <div if.bind="results.length <= 0" class="alert alert-warning">\n      Es passt nichtmal eine Verpackungseinheit auf die Palette.\n    </div>\n\n    <div if.bind="!error" repeat.for="r of results">\n      <table class="table table-bordered table-hover">\n        <thead>\n          <tr class="info">\n            <th colspan="2">\n              Auf Seite ${r.length} cm × ${r.width} cm gestellt\n              <a href="#" class="pull-right" click.delegate="show3d(r)">\n                3D-Ansicht\n              </a>\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td class="col-xs-3">VE Gesamt</td>\n            <td>${r.totalBoxes}</td>\n          </tr>\n          <tr>\n            <td class="col-xs-3">VE pro Lage</td>\n            <td>${r.boxesLength} × ${r.boxesWidth} = ${r.boxesPerLayer}</td>\n          </tr>\n          <tr>\n            <td class="col-xs-3">Anzahl Lagen</td>\n            <td>${r.numberOfLayers}</td>\n          </tr>\n          <tr>\n            <td class="col-xs-3">Größe auf der Palette</td>\n            <td>${r.actualLength} cm × ${r.actualWidth} cm × ${r.actualHeight} cm</td>\n          </tr>\n          <tr>\n            <td class="col-xs-3">Ausnutzung</td>\n            <td>${r.usage}%</td>\n          </tr>\n          <tr>\n            <td class="col-xs-3">Inhalt Gesamt</td>\n            <td>${r.totalItems} Stück</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </form>\n\n  <modal3d data.bind="data3d"></modal3d>\n</template>\n'}),define("text!modal3d.html",["module"],function(e){e.exports='<template>\n  <div id="modal3d" class="modal fade" tabindex="-1">\n    <div class="modal-dialog modal-lg">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-dismiss="modal">×</button>\n          <h3 class="modal-title">3D-Ansicht</h4>\n        </div>\n        <div id="wrapper3d"></div>\n        <div class="modal-footer">\n          <button class="btn btn-default" data-dismiss="modal">Schließen</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n'});